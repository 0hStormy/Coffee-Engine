<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>sugar Cube Testing Playground</title>
    </head>
    <body>
        <div id="blocklyDiv" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; background-color: #ffffff"></div>
        <!--Base sugarcube settings-->
        <script src="editor/codeEditors/sugarcube/sugarcube.js"></script>
        <script src="editor/codeEditors/sugarcube/sugarcubeUtils/sugarcubeSettings.js"></script>
        <script src="editor/codeEditors/sugarcube/sugarcubeUtils/commonVariables.js"></script>
        <script src="editor/codeEditors/sugarcube/sugarcubeUtils/zelosRenderOverrides.js"></script>
        <script src="editor/codeEditors/sugarcube/types.js"></script>
        <script src="editor/codeEditors/sugarcube/addons/sugarcubeCodeBuilder.js"></script>
        <script src="editor/codeEditors/sugarcube/sugarcubeUtils/extensionManager.js"></script>

        <!--Blockly Addons for sugarcube-->
        <script src="editor/codeEditors/sugarcube/addons/continuousToolbox.js"></script>
        <script src="editor/codeEditors/sugarcube/addons/hsvField.js"></script>
        <script src="editor/codeEditors/sugarcube/addons/dynamicMenu.js"></script>
        <script src="editor/codeEditors/sugarcube/addons/disableTopBlocks.js"></script>
        <script src="editor/codeEditors/sugarcube/addons/multilineField.js"></script>
        <script src="editor/codeEditors/sugarcube/addons/autoMinimapHider.js"></script>

        <!--Our Mutators-->
        <script src="editor/codeEditors/sugarcube/sugarcubeUtils/xmlHelper.js"></script>
        <script src="editor/codeEditors/sugarcube/mutators/dragMutator.js"></script>
        <script src="editor/codeEditors/sugarcube/mutators/customBlocks.js"></script>

        <script src="editor/codeEditors/sugarcube/addons/focusRegion.js"></script>
        <script src="editor/codeEditors/sugarcube/addons/minimap.js"></script>

        <script src="editor/codeEditors/sugarcube/addons/blockSearcher.js"></script>
        <script src="editor/codeEditors/sugarcube/addons/toolboxSearcher.js"></script>

        <script>
            window.onload = () => {
                sugarcube.workspace = Blockly.inject("blocklyDiv", {
                    collapse: false,
                    comments: true,
                    toolbox: sugarcube.toolbox,
                    theme: sugarcube.blocklyTheme,
                    renderer: "sugarcube",
                    grid: {
                        spacing: 40,
                        length: 3,
                        colour: "#484848",
                        snap: false,
                    },
                    zoom: {
                        controls: true,
                        wheel: false,
                        startScale: 0.8,
                        maxScale: 3,
                        minScale: 0.3,
                        scaleSpeed: 1.2,
                        pinch: true,
                    },
                    move: {
                        scrollbars: {
                            horizontal: true,
                            vertical: true,
                        },
                        drag: true,
                        wheel: true,
                    },
                    trashcan: false, // we don't want the recycling bin. Maybe it can be an option though?
                    plugins: {
                        toolbox: sugarcube.ContinuousToolbox,
                        flyoutsVerticalToolbox: sugarcube.ContinuousFlyout,
                        metricsManager: sugarcube.ContinuousMetrics,
                    },
                });

                sugarcube.minimap = new sugarcube.minimapStorage.PositionedMinimap(sugarcube.workspace);
                sugarcube.minimap.init();
                sugarcube.minimapWorkspace = sugarcube.minimap.minimapWorkspace;

                sugarcube.workspace.addChangeListener(Blockly.Events.disableOrphans);
                sugarcube.workspace.addChangeListener(sugarcube.shouldMinimapBeVisible);

                //Testing category for various block types and menus
                //Dunno why I called it testCat.js
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/testCat.js");

                //Load our base categories
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/motion.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/looks.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/sounds.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/events.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/controls.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/sensing.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/operators.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/strings.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/objects.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/variables.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/lists.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/myBlocks.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/debugger.js");
                sugarcube.extensionManager.loadExtension("editor/codeEditors/sugarcube/defaultBlocks/files.js");
            };
        </script>
    </body>
</html>
